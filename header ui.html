<div>
<hr>
	<div id="titleElement">
		<a href="http://devcnn.wordpress.com" target="_blank"><b>MouseHunt AutoBot (version 1.29.27 Enhanced Edition)</b></a>
	</div>
	<div id="nextHornTimeElement">
		<b>Next Hunter Horn Time:</b>1 min 12 sec  <i>(included extra 13 sec delay &amp; +/- 5 seconds different from MouseHunt timer)</i>
	</div>
	<div id="checkTimeElement">
		<b>Next Trap Check Time:</b> 17 min 27 sec  <i>(included extra 6 sec delay)</i>
	</div>
	<div id="kingTimeElement">
		<b>Last King's Reward:</b> - <font id="lastKingRewardSumTimeElement"></font>
	</div>
	<div id="loadTimeElement">
		<b>Last Page Load: </b>Tue Mar 01 2016 09:15:12
	</div>
	<div id="showPreferenceLinkDiv" style="text-align:right">
		<span>
			<a id="showPreferenceLink" name="showPreferenceLink" 
			onclick=
			"if (document.getElementById('showPreferenceLink').innerHTML == '<b>[Hide Preference]</b>') { 
				document.getElementById('preferenceDiv').style.display='none';  
				document.getElementById('showPreferenceLink').innerHTML='<b>[Show Preference]</b>'; 
			} 
			else { 
				setLocalToSession();
				var selectedAlgo = window.sessionStorage.getItem('eventLocation');
				showOrHideTr(selectedAlgo);
				document.getElementById('preferenceDiv').style.display='block'; 
				document.getElementById('showPreferenceLink').innerHTML='<b>[Hide Preference]</b>'; 
				document.getElementById('eventAlgo').value = selectedAlgo;
				loadSCCustomAlgo();
				loadLabyrinth();
			}"><b>[Show Preference]</b></a>&nbsp;&nbsp;&nbsp;
		</span>
	</div>
<hr>
	<div id="preferenceDiv" style="display: none;">
		<table border="0" width="100%">
			<tbody>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Bot aggressively by ignore all safety measure such as check horn image visible before sounding it"><b>Aggressive Mode</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="AggressiveModeInput" onchange=
						"var isDisable = (value == 'true') ? 'disabled' : '';
						document.getElementById('HornTimeDelayMinInput').disabled=isDisable; 
						document.getElementById('HornTimeDelayMaxInput').disabled=isDisable;
						">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Extra delay time before sounding the horn (in seconds)"><b>Delay:</b></a>&emsp;
						<input type="number" id="HornTimeDelayMinInput" min="0" max="360" size="5" value="10"> seconds ~ 
						<input type="number" id="HornTimeDelayMaxInput" min="1" max="361" size="5" value="30"> seconds
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Enable trap check once an hour"><b>Trap Check</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="TrapCheckInput" onchange=
						"var isDisable = (value == 'false') ? 'disabled' : '';
						document.getElementById('TrapCheckTimeDelayMinInput').disabled=isDisable;
						document.getElementById('TrapCheckTimeDelayMaxInput').disabled=isDisable;
						">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Extra delay time to trap check (in seconds)"><b>Delay:</b></a>&emsp;
						<input type="number" id="TrapCheckTimeDelayMinInput" min="0" max="360" size="5" value="10"> seconds ~ 
						<input type="number" id="TrapCheckTimeDelayMaxInput" min="1" max="361" size="5" value="30"> seconds
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Play sound when encounter king's reward"><b>Play King Reward Sound</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="PlayKingRewardSoundInput" >
							<option value="false">False</option>
							<option value="true">True</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Solve King Reward automatically"><b>Auto Solve King Reward</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="AutoSolveKRInput" onchange=
						"if (value == 'false') { 
							document.getElementById('AutoSolveKRDelayMinInput').disabled='disabled'; 
							document.getElementById('AutoSolveKRDelayMaxInput').disabled='disabled';
						}
						else {
							document.getElementById('AutoSolveKRDelayMinInput').disabled=''; 
							document.getElementById('AutoSolveKRDelayMaxInput').disabled='';
						}
						">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Extra delay time to solve King Reward (in seconds)"><b>Delay:</b></a>&emsp;
						<input type="number" id="AutoSolveKRDelayMinInput" min="0" max="360" size="5" value="10"> seconds ~ 
						<input type="number" id="AutoSolveKRDelayMaxInput" min="1" max="361" size="5" value="30"> seconds
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Save King Reward Image into localStorage"><b>Save King Reward Image</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="SaveKRImageInput">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="The script will pause if player at different location that hunt location set before"><b>Remember Location</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="PauseLocationInput">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;" colspan="2">(Changes above this line only take place after user save the preference) <input type="button" id="PreferenceSaveInput" value="Save"
					onclick=
					"window.localStorage.setItem('AggressiveMode',document.getElementById('AggressiveModeInput').value);
					window.localStorage.setItem('HornTimeDelayMin', document.getElementById('HornTimeDelayMinInput').value); 
					window.localStorage.setItem('HornTimeDelayMax', document.getElementById('HornTimeDelayMaxInput').value);					
					window.localStorage.setItem('TrapCheck',document.getElementById('TrapCheckInput').value);
					window.localStorage.setItem('TrapCheckTimeDelayMin', document.getElementById('TrapCheckTimeDelayMinInput').value); 
					window.localStorage.setItem('TrapCheckTimeDelayMax', document.getElementById('TrapCheckTimeDelayMaxInput').value);					
					window.localStorage.setItem('PlayKingRewardSound',document.getElementById('PlayKingRewardSoundInput').value);
					window.localStorage.setItem('AutoSolveKR',document.getElementById('AutoSolveKRInput').value);
					window.localStorage.setItem('AutoSolveKRDelayMin', document.getElementById('AutoSolveKRDelayMinInput').value); 
					window.localStorage.setItem('AutoSolveKRDelayMax', document.getElementById('AutoSolveKRDelayMaxInput').value);					
					window.localStorage.setItem('SaveKRImage',document.getElementById('SaveKRImageInput').value);
					window.localStorage.setItem('PauseLocation',document.getElementById('PauseLocationInput').value);
					">&nbsp;&nbsp;&nbsp;</td>
				</tr>
				<tr>
					<td style="height:24px" colspan="2">
						<div style="width: 100%; height: 1px; background: #000000; overflow: hidden;">
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Select the script algorithm based on certain event / location"><b>Event or Location</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="eventAlgo" 
							onchange=
							"window.sessionStorage.setItem('eventLocation', value); 
							showOrHideTr(value);
							">
							<option value="None">None</option>
							<option value="Charge Egg 2015">Charge Egg 2015</option>
							<option value="Charge Egg 2015(17)">Charge Egg 2015(17)</option>
							<option value="Burroughs Rift(Red)">Burroughs Rift(Red)</option>
							<option value="Burroughs Rift(Green)">Burroughs Rift(Green)</option>
							<option value="Burroughs Rift(Yellow)">Burroughs Rift(Yellow)</option>
							<option value="Halloween 2015">Halloween 2015</option>
							<option value="Sunken City">Sunken City</option>
							<option value="Sunken City Aggro">Sunken City Aggro</option>
							<option value="Sunken City Custom">Sunken City Custom</option>
							<option value="All LG Area">All LG Area</option>
							<option value="Labyrinth">Labyrinth</option>
						</select>
					</td>
				</tr>
				<tr id="scCustom" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select custom algorithm"><b>SC Custom Algorithm</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="scHuntZone" onchange="loadSCCustomAlgo();">
							<option value="ZONE_DEFAULT">Default</option>
							<option value="ZONE_CORAL">Coral</option>
							<option value="ZONE_SCALE">Scale</option>
							<option value="ZONE_BARNACLE">Barnacle</option>
							<option value="ZONE_TREASURE">Treasure</option>
							<option value="ZONE_DANGER">Danger</option>
							<option value="ZONE_DANGER_PP">Danger PP</option>
							<option value="ZONE_OXYGEN">Oxygen</option>
							<option value="ZONE_BONUS">Bonus</option>
						</select>
						<select id="scHuntZoneEnable" onchange="saveSCCustomAlgo();">
							<option value="true">Hunt</option>
							<option value="false">Jet Through</option>
						</select>
						<select id="scHuntBait" onchange="saveSCCustomAlgo();">
							<option value="Brie">Brie</option>
							<option value="Gouda">Gouda</option>
							<option value="SUPER">SUPER|brie+</option>
						</select>
						<select id="scHuntTrinket" onchange="saveSCCustomAlgo();">
							<option value="None">None</option>
							<option value="EAC">EAC</option>
							<option value="scAnchorTreasure">GAC, EAC</option>
							<option value="scAnchorDanger">SAC, EAC</option>
							<option value="UAC">UAC</option>
						</select>
					</td>
				</tr>
				<tr id="labyrinth" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select a district to focus on"><b>District to Focus</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="labyrinthDistrict" onchange="loadLabyrinth();">
							<option value="FEALTY">Fealty</option>
							<option value="TECH">Tech</option>
							<option value="SCHOLAR">Scholar</option>
							<option value="TREASURY">Treasury</option>
							<option value="FARMING">Farming</option>
						</select>&nbsp;&nbsp;<a title="Edit priorites of certain district"><b>Priorites:</b></a>&emsp;
						<input id="labyrinthPriorities" size="20" type="text" value="" onchange=
						"
						var selectedDistrict = document.getElementById('labyrinthDistrict').value;
						window.sessionStorage.setItem('Labyrinth_' + selectedDistrict, value);
						">
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;" colspan="2">
						<input type="button" id="AlgoConfigSaveInput" title="Save changes of Event or Location without reload, take effect after current hunt" value="Apply" onclick="setSessionToLocal();">
						<input type="button" id="AlgoConfigSaveReloadInput" title="Save changes of Event or Location with reload, take effect immediately" value="Apply & Reload" onclick="setSessionToLocal();">&nbsp;&nbsp;&nbsp;
					</td>
				</tr>
			</tbody>
		</table>
	<hr>
	</div>
</div>
<script type="text/javascript">
	function setLocalToSession(){
		var key;
		for(var i=0;i<window.localStorage.length;i++){
			key = window.localStorage.key(i);
			if(key.indexOf("SCCustom_")>-1 || key.indexOf("Labyrinth_")>-1 || key.indexOf("eventLocation")>-1){
				window.sessionStorage.setItem(key, window.localStorage.getItem(key));
			}
		}
	}
	
	function setSessionToLocal(){
		if(window.sessionStorage.length==0)
			return;
		
		window.localStorage.setItem('eventLocation', window.sessionStorage.getItem('eventLocation'));
		var key;
		for(var i=0;i<window.sessionStorage.length;i++){
			key = window.sessionStorage.key(i);
			if(key.indexOf("SCCustom_")>-1 || key.indexOf("Labyrinth_")>-1 || key.indexOf("eventLocation")>-1){
				window.localStorage.setItem(key, window.sessionStorage.getItem(key));
			}
		}
	}
	
	function loadSCCustomAlgo()
	{
		var selectedZone = document.getElementById('scHuntZone').value;
		var storageValue = window.sessionStorage.getItem('SCCustom_' + selectedZone);
		var scHuntZoneEnableEle = document.getElementById('scHuntZoneEnable');
		var scHuntBaitEle = document.getElementById('scHuntBait');
		var scHuntTrinketEle = document.getElementById('scHuntTrinket');
		if (storageValue == null){
			scHuntZoneEnableEle.selectedIndex = 0;
			scHuntBait.selectedIndex = 0;
			scHuntTrinketEle.selectedIndex = 0;
			window.sessionStorage.setItem('SCCustom_' + selectedZone, [scHuntZoneEnableEle.value,scHuntBaitEle.value,scHuntTrinketEle.value]);
		}
		else{
			storageValue = storageValue.split(',');
			scHuntZoneEnableEle.value = storageValue[0];
			scHuntBaitEle.value = storageValue[1];
			scHuntTrinketEle.value = storageValue[2];
		}
	}
	
	function saveSCCustomAlgo()
	{	
		var scHuntZoneEle = document.getElementById('scHuntZone');
		var scHuntZoneEnableEle = document.getElementById('scHuntZoneEnable');
		var scHuntBaitEle = document.getElementById('scHuntBait');
		var scHuntTrinketEle = document.getElementById('scHuntTrinket');
		var key = 'SCCustom_' + scHuntZoneEle.value;
		var value = scHuntZoneEnableEle.value + ',' + scHuntBaitEle.value + ',' + scHuntTrinketEle.value;
		window.sessionStorage.setItem(key, value);
	}
	
	function loadLabyrinth(){
		var selectedDistrict = document.getElementById('labyrinthDistrict').value;
		var storageValue = window.sessionStorage.getItem('Labyrinth_' + selectedDistrict);
		if (storageValue == null){
			if(selectedDistrict == 'FEALTY')
				storageValue = '9,8,7,6,5,4,3,2,1,19,20,21,19,20,21,19,20,21,19,20,21,19,20,21,19,20,21,15,14,13,12,11,10,16,17,18,16,17,18';
			else if(selectedDistrict == 'TECH')
				storageValue = '19,20,21,19,20,21,19,20,21,9,8,7,6,5,4,3,2,1,19,20,21,19,20,21,19,20,21,15,14,13,12,11,10,16,17,18,16,17,18';
			else if(selectedDistrict == 'SCHOLAR')
				storageValue = '19,20,21,19,20,21,19,20,21,19,20,21,19,20,21,19,20,21,9,8,7,6,5,4,3,2,1,15,14,13,12,11,10,16,17,18,16,17,18';
			else if(selectedDistrict == 'TREASURY')
				storageValue = '10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,6,5,4,3,2,1,7,8,9,7,8,9';
			else if(selectedDistrict == 'FARMING')
				storageValue = '10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,10,11,12,7,8,9,7,8,9,6,5,4,3,2,1';
			
			window.sessionStorage.setItem('Labyrinth_' + selectedDistrict, storageValue);
		}
		document.getElementById('labyrinthPriorities').value = storageValue;
	}
	
	function showOrHideTr(algo)
	{
		document.getElementById('scCustom').style.display = (algo == 'Sunken City Custom') ? 'table-row' : 'none';
		document.getElementById('labyrinth').style.display = (algo == 'Labyrinth') ? 'table-row' : 'none';
	}
</script>