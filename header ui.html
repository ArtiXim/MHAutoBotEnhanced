<div>
<hr>
	<div id="titleElement">
		<a href="http://devcnn.wordpress.com" target="_blank"><b>MouseHunt AutoBot (version 1.29.27 Enhanced Edition)</b></a>
	</div>
	<div id="nextHornTimeElement">
		<b>Next Hunter Horn Time:</b>1 min 12 sec  <i>(included extra 13 sec delay &amp; +/- 5 seconds different from MouseHunt timer)</i>
	</div>
	<div id="checkTimeElement">
		<b>Next Trap Check Time:</b> 17 min 27 sec  <i>(included extra 6 sec delay)</i>
	</div>
	<div id="kingTimeElement">
		<b>Last King's Reward:</b> - <font id="lastKingRewardSumTimeElement"></font>
	</div>
	<div id="loadTimeElement">
		<b>Last Page Load: </b>Tue Mar 01 2016 09:15:12
	</div>
	<div id="showPreferenceLinkDiv" style="text-align:right">
		<span>
			<a id="idGetLog" name="GetLog"
			onclick="onIdGetLogClicked();"><b>[Get Log]</b></a>&nbsp;&nbsp;&nbsp;
		</span>
		<span>
			<a id="idGetPreference" name="GetPreference"
			onclick="onIdGetPreferenceClicked();"><b>[Get Preference]</b></a>&nbsp;&nbsp;&nbsp;
		</span>
		<span>
			<a id="showPreferenceLink" name="showPreferenceLink" 
			onclick=
			"if (document.getElementById('showPreferenceLink').innerHTML == '<b>[Hide Preference]</b>') { 
				document.getElementById('preferenceDiv').style.display='none';  
				document.getElementById('showPreferenceLink').innerHTML='<b>[Show Preference]</b>'; 
			} 
			else { 
				setLocalToSession();
				var selectedAlgo = window.sessionStorage.getItem('eventLocation');
				showOrHideTr(selectedAlgo);
				document.getElementById('preferenceDiv').style.display='block'; 
				document.getElementById('showPreferenceLink').innerHTML='<b>[Hide Preference]</b>'; 
				document.getElementById('eventAlgo').value = selectedAlgo;
			}"><b>[Show Preference]</b></a>&nbsp;&nbsp;&nbsp;
		</span>
	</div>
<hr>
	<div id="preferenceDiv" style="display: none;">
		<table border="0" width="100%">
			<tbody>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Bot aggressively by ignore all safety measure such as check horn image visible before sounding it"><b>Aggressive Mode</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="AggressiveModeInput" onchange=
						"var isDisable = (value == 'true') ? 'disabled' : '';
						document.getElementById('HornTimeDelayMinInput').disabled=isDisable; 
						document.getElementById('HornTimeDelayMaxInput').disabled=isDisable;
						">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Extra delay time before sounding the horn (in seconds)"><b>Delay:</b></a>&emsp;
						<input type="number" id="HornTimeDelayMinInput" min="0" max="360" size="5" value="10"> seconds ~ 
						<input type="number" id="HornTimeDelayMaxInput" min="1" max="361" size="5" value="30"> seconds
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Enable trap check once an hour"><b>Trap Check</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="TrapCheckInput" onchange=
						"var isDisable = (value == 'false') ? 'disabled' : '';
						document.getElementById('TrapCheckTimeDelayMinInput').disabled=isDisable;
						document.getElementById('TrapCheckTimeDelayMaxInput').disabled=isDisable;
						">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Extra delay time to trap check (in seconds)"><b>Delay:</b></a>&emsp;
						<input type="number" id="TrapCheckTimeDelayMinInput" min="0" max="360" size="5" value="10"> seconds ~ 
						<input type="number" id="TrapCheckTimeDelayMaxInput" min="1" max="361" size="5" value="30"> seconds
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Play sound when encounter king's reward"><b>Play King Reward Sound</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="PlayKingRewardSoundInput" >
							<option value="false">False</option>
							<option value="true">True</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Solve King Reward automatically"><b>Auto Solve King Reward</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="AutoSolveKRInput" onchange=
						"if (value == 'false') { 
							document.getElementById('AutoSolveKRDelayMinInput').disabled='disabled'; 
							document.getElementById('AutoSolveKRDelayMaxInput').disabled='disabled';
						}
						else {
							document.getElementById('AutoSolveKRDelayMinInput').disabled=''; 
							document.getElementById('AutoSolveKRDelayMaxInput').disabled='';
						}
						">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Extra delay time to solve King Reward (in seconds)"><b>Delay:</b></a>&emsp;
						<input type="number" id="AutoSolveKRDelayMinInput" min="0" max="360" size="5" value="10"> seconds ~ 
						<input type="number" id="AutoSolveKRDelayMaxInput" min="1" max="361" size="5" value="30"> seconds
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Save King Reward Image into localStorage"><b>Save King Reward Image</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="SaveKRImageInput">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="The script will pause if player at different location that hunt location set before"><b>Remember Location</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="PauseLocationInput">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;" colspan="2">(Changes above this line only take place after user save the preference) <input type="button" id="PreferenceSaveInput" value="Save"
					onclick=
					"window.localStorage.setItem('AggressiveMode',document.getElementById('AggressiveModeInput').value);
					window.localStorage.setItem('HornTimeDelayMin', document.getElementById('HornTimeDelayMinInput').value); 
					window.localStorage.setItem('HornTimeDelayMax', document.getElementById('HornTimeDelayMaxInput').value);					
					window.localStorage.setItem('TrapCheck',document.getElementById('TrapCheckInput').value);
					window.localStorage.setItem('TrapCheckTimeDelayMin', document.getElementById('TrapCheckTimeDelayMinInput').value); 
					window.localStorage.setItem('TrapCheckTimeDelayMax', document.getElementById('TrapCheckTimeDelayMaxInput').value);					
					window.localStorage.setItem('PlayKingRewardSound',document.getElementById('PlayKingRewardSoundInput').value);
					window.localStorage.setItem('AutoSolveKR',document.getElementById('AutoSolveKRInput').value);
					window.localStorage.setItem('AutoSolveKRDelayMin', document.getElementById('AutoSolveKRDelayMinInput').value); 
					window.localStorage.setItem('AutoSolveKRDelayMax', document.getElementById('AutoSolveKRDelayMaxInput').value);					
					window.localStorage.setItem('SaveKRImage',document.getElementById('SaveKRImageInput').value);
					window.localStorage.setItem('PauseLocation',document.getElementById('PauseLocationInput').value);
					">&nbsp;&nbsp;&nbsp;</td>
				</tr>
				<tr>
					<td style="height:24px" colspan="2">
						<div style="width: 100%; height: 1px; background: #000000; overflow: hidden;">
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;"><a title="Select the script algorithm based on certain event / location"><b>Event or Location</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="eventAlgo" 
							onchange=
							"window.sessionStorage.setItem('eventLocation', value); 
							showOrHideTr(value);
							">
							<option value="None">None</option>
							<option value="Charge Egg 2015">Charge Egg 2015</option>
							<option value="Charge Egg 2015(17)">Charge Egg 2015(17)</option>
							<option value="Burroughs Rift(Red)">Burroughs Rift(Red)</option>
							<option value="Burroughs Rift(Green)">Burroughs Rift(Green)</option>
							<option value="Burroughs Rift(Yellow)">Burroughs Rift(Yellow)</option>
							<option value="Burroughs Rift Custom">Burroughs Rift Custom</option>
							<option value="Fiery Warpath">Fiery Warpath</option>
							<option value="Halloween 2015">Halloween 2015</option>
							<option value="Sunken City">Sunken City</option>
							<option value="Sunken City Aggro">Sunken City Aggro</option>
							<option value="Sunken City Custom">Sunken City Custom</option>
							<option value="All LG Area">All LG Area</option>
							<option value="Labyrinth">Labyrinth</option>
							<option value="SG/ZT">Seasonal Garden</option>
						</select>
					</td>
				</tr>
				<tr id="trUseZum" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select to arm Zugzwang's Ultimate Move whenever possible in certain season/location"><b>Use ZUM in</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectUseZUM" onchange="onSelectUseZUMChanged();">
							<option value="None">None</option>
							<option value="ALL">All Season</option>
							<!-- <option value="ZT_ONLY">ZT Only</option>
							<option value="SG_ZT">SG & ZT</option> -->
							<option value="SPRING">Spring</option>
							<option value="SUMMER">Summer</option>
							<option value="FALL">Fall</option>
							<option value="WINTER">Winter</option>
						</select>
					</td>
				</tr>
				<tr id="lgArea" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select auto pour status"><b>Auto Pour</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="lgAutoPour" onchange="saveLG();">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Max number of salt before hunting King Grub"><b>Salt Charge:</b></a>&emsp;
						<input type="number" id="lgSalt" min="1" max="50" size="5" value="25" onchange="saveLG();">
					</td>
				</tr>
				<tr id="scCustom" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select custom algorithm"><b>SC Custom Algorithm</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="scHuntZone" onchange="loadSCCustomAlgo();">
							<option value="ZONE_DEFAULT">Default</option>
							<option value="ZONE_CORAL">Coral</option>
							<option value="ZONE_SCALE">Scale</option>
							<option value="ZONE_BARNACLE">Barnacle</option>
							<option value="ZONE_TREASURE">Treasure</option>
							<option value="ZONE_DANGER">Danger</option>
							<option value="ZONE_DANGER_PP">Danger PP</option>
							<option value="ZONE_OXYGEN">Oxygen</option>
							<option value="ZONE_BONUS">Bonus</option>
						</select>
						<select id="scHuntZoneEnable" onchange="saveSCCustomAlgo();">
							<option value="true">Hunt</option>
							<option value="false">Jet Through</option>
						</select>
						<select id="scHuntBait" onchange="saveSCCustomAlgo();">
							<option value="Brie">Brie</option>
							<option value="Gouda">Gouda</option>
							<option value="SUPER">SUPER|brie+</option>
						</select>
						<select id="scHuntTrinket" onchange="saveSCCustomAlgo();">
							<option value="None">None</option>
							<option value="EAC">EAC</option>
							<option value="scAnchorTreasure">GAC, EAC</option>
							<option value="scAnchorDanger">SAC, EAC</option>
							<option value="UAC">UAC</option>
						</select>
					</td>
				</tr>
				<tr id="labyrinth" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select a district to focus on"><b>District to Focus</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="labyrinthDistrict" onchange=
						"saveDistrictFocus(value);
						loadLabyrinthHallway();
						">
							<option value="None">None</option>
							<option value="FEALTY">Fealty</option>
							<option value="TECH">Tech</option>
							<option value="SCHOLAR">Scholar</option>
							<option value="TREASURY">Treasury</option>
							<option value="FARMING">Farming</option>
						</select>
					</td>
				</tr>
				<tr id="trLabyrinthDisarm" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select to disarm cheese at X last hunt in hallway when total clues near 100"><b>Security Disarm</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectLabyrinthDisarm" onchange="onSelectLabyrinthDisarm();">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;At Last&nbsp;
						<input type="number" id="inputLabyrinthLastHunt" min="1" max="10" style="width:40px" value="10" onchange="onInputLabyrinthLastHuntChanged();">&nbsp;Hunt(s) in Hallway Near 100 Total Clues
					</td>
				</tr>
				<tr id="trPriorities15" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select hallway priorities when focus-district clues less than 15"><b>Priorities (Focus-District Clues < 15)</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectHallway15Plain" onchange="saveLabyrinthHallway();">
							<option value="lp">Long Plain Hallway First</option>
							<option value="sp">Short Plain Hallway First</option>
						</select>
					</td>
				</tr>
				<tr id="trPriorities1560" style="display:table-row;">
					<td style="height:24px; text-align:right;"><a title="Select hallway priorities when focus-district clues within 15 and 60"><b>Priorities (15 < Focus-District Clues < 60)</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectHallway1560Superior" onchange="saveLabyrinthHallway();">
							<option value="ls">Long Superior Hallway First</option>
							<option value="ss">Short Superior Hallway First</option>
						</select>
						<select id="selectHallway1560Plain" onchange="saveLabyrinthHallway();">
							<option value="lp">Long Plain Hallway First</option>
							<option value="sp">Short Plain Hallway First</option>
						</select>
					</td>
				</tr>
				<tr id="trPriorities60" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select hallway priorities when focus-district clues more than 60"><b>Priorities (Focus-District Clues > 60)</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectHallway60Epic" onchange="saveLabyrinthHallway();">
							<option value="le">Long Epic Hallway First</option>
							<option value="se">Short Epic Hallway First</option>
						</select>
						<select id="selectHallway60Superior" onchange="saveLabyrinthHallway();">
							<option value="ls">Long Superior Hallway First</option>
							<option value="ss">Short Superior Hallway First</option>
						</select>
						<select id="selectHallway60Plain" onchange="saveLabyrinthHallway();">
							<option value="lp">Long Plain Hallway First</option>
							<option value="sp">Short Plain Hallway First</option>
						</select>
					</td>
				</tr>
				<tr id="labyrinthOtherHallway" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Choose doors other than focused door when there is no available focused door to be choosen"><b>Open Non-Focus Door</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="chooseOtherDoors" onchange=
						"saveLabyrinthHallway();
						if (value == 'false')
							document.getElementById('typeOtherDoors').disabled='disabled'; 
						else
							document.getElementById('typeOtherDoors').disabled=''; 
						">
							<option value="false">False</option>
							<option value="true">True</option>
						</select>&nbsp;&nbsp;<a title="Select a choosing type for non-focused doors"><b>Choosing Type:</b></a>&emsp;
						<select id="typeOtherDoors" onchange="saveLabyrinthHallway();">
							<option value="SHORTEST_ONLY">Shortest Length Only</option>
							<option value="FEWEST_ONLY">Fewest Clue Only</option>
							<option value="SHORTEST_FEWEST">Shortest Length => Fewest Clue</option>
							<option value="FEWEST_SHORTEST">Fewest Clue => Shortest Length</option>
						</select>
					</td>
				</tr>
				<tr id="labyrinthGG" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select when/how GG is armed"><b>Arm GG At</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectGGType" onchange="onSelectGGTypeChanged();">
							<option value="CLUE_RANGE">Clue Range</option>
							<option value="HALLWAY_TYPE">Hallway Type</option>
							<option value="FOCUSING_DISTRICT">Focusing District</option>
							<option value="None">None</option>
						</select>
					</td>
				</tr>
				<tr id="trFWWave" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select FW wave"><b>Wave</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectFWWave" onchange="onSelectFWWaveChanged();">
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
						</select>
					</td>
				</tr>
				<tr id="trFWFocusType" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select either Normal (Warrior, Scout, Archer) or Special (Cavalry, Mage)"><b>Soldier Type to Focus</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectFWFocusType" onchange="onSelectFWFocusTypeChanged();">
							<option value="NORMAL">Normal</option>
							<option value="SPECIAL">Special</option>
						</select>&nbsp;&nbsp;<a title="Select which soldier type comes first based on population"><b>Priorities:</b></a>&emsp;
						<select id="selectFWPriorities" onchange="onSelectFWPrioritiesChanged();">
							<option value="HIGHEST">Highest Population First</option>
							<option value="LOWEST">Lowest Population First</option>
						</select>
					</td>
				</tr>
				<tr id="trFWStreak" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select streak"><b>Streak</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectFWStreak" onchange="onSelectFWStreakChanged();">
							<option value="0">0</option>
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8">8</option>
							<option value="9">9</option>
							<option value="10">10</option>
							<option value="11">11</option>
							<option value="12">12</option>
							<option value="13">13</option>
							<option value="14">14</option>
							<option value="15">15</option>
						</select>
						<select id="selectFWCheese" onchange="onSelectFWCheeseChanged();">
							<option value="Brie">Brie</option>
							<option value="Gouda">Gouda</option>
							<option value="SUPER">SUPER|brie+</option>
						</select>
						<select id="selectFWCharmType" onchange="onSelectFWCharmTypeChanged();">
							<option value="NORMAL">Warpath</option>
							<option value="SUPER">Super Warpath</option>
						</select>
						<select id="selectFWSpecial" onchange="onSelectFWSpecialChanged();">
							<option value="None">None</option>
							<option value="COMMANDER">Commander</option>
							<option value="GARGANTUA">Gargantua</option>
						</select>
					</td>
				</tr>
				<tr id="trFWLastType" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select config when there is only one soldier type left"><b>Last Soldier Type</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectFWLastTypeConfig" onchange="onSelectFWLastTypeConfigChanged();">
							<option value="CONFIG_STREAK">Follow Streak Config</option>
							<option value="CONFIG_GOUDA">Gouda & No Warpath Charm</option>
							<option value="CONFIG_UNCHANGED">Trap Setup Unchanged</option>
						</select>
					</td>
				</tr>
				<tr id="trBRConfig" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select the mist tier to hunt"><b>Hunt At</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectBRHuntMistTier" onchange="onSelectBRHuntMistTierChanged();">
							<option value="Red">Red</option>
							<option value="Green">Green</option>
							<option value="Yellow">Yellow</option>
							<option value="None">None</option>
						</select>&nbsp;&nbsp;Mist Tier
					</td>
				</tr>
				<tr id="trBRToggle" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select the amount of hunt to toggle canister at red mist tier"><b>Toggle Canister Every</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<input type="number" id="ToggleCanisterInput" min="1" max="10" value="1" onchange="onInputToggleCanisterChanged();">&nbsp;&nbsp;Hunt(s)
					</td>
				</tr>
				<tr id="trBRTrapSetup" style="display:none;">
					<td style="height:24px; text-align:right;"><a title="Select trap setup combination for respective mist tier"><b>Trap Setup</b></a>&nbsp;&nbsp;:&nbsp;&nbsp;</td>
					<td style="height:24px">
						<select id="selectBRTrapWeapon" onchange="onSelectBRTrapWeaponChanged();">
							<option value="Mysteriously unYielding">MYNORCA</option>
							<option value="Focused Crystal Laser">FCL</option>
							<option value="Multi-Crystal Laser">MCL</option>
							<option value="Biomolecular Re-atomizer Trap">BRT</option>
							<option value="Crystal Tower">CT</option>
						</select>
						<select id="selectBRTrapBase" onchange="onSelectBRTrapBaseChanged();">
							<option value="Fissure Base">Fissure</option>
							<option value="Rift Base">Rift</option>
							<option value="Fracture Base">Fracture</option>
							<option value="Enerchi Induction Base">Enerchi</option>
							<option value="Attuned Enerchi Induction Base">A. Enerchi</option>
							<option value="Minotaur Base">Minotaur</option>
						</select>
						<select id="selectBRTrapTrinket" onchange="onSelectBRTrapTrinketChanged();">
							<option value="Rift Ultimate Luck">Rift Ultimate Luck</option>
							<option value="Rift Ultimate Power">Rift Ultimate Power</option>
							<option value="Ultimate Luck">Ultimate Luck</option>
							<option value="Ultimate Power">Ultimate Power</option>
							<option value="Rift Power">Rift Power</option>
							<option value="Super Rift Vacuum">Super Rift Vacuum</option>
							<option value="Rift Vacuum">Rift Vacuum</option>
							<option value="Enerchi">Enerchi</option>
							<option value="NoAbove">None of the above</option>
							<option value="None">None</option>
						</select>
						<select id="selectBRTrapBait" onchange="onSelectBRTrapBaitChanged();">
							<option value="Polluted Parmesan">PP</option>
							<option value="Terre Ricotta">Terre</option>
							<option value="Magical String">Magical</option>
							<option value="Brie String">Brie</option>
							<option value="Swiss String">Swiss</option>
							<option value="Marble String">Marble</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="height:24px; text-align:right;" colspan="2">
						<input type="button" id="AlgoConfigSaveInput" title="Save changes of Event or Location without reload, take effect after current hunt" value="Apply" onclick="setSessionToLocal();">
						<input type="button" id="AlgoConfigSaveReloadInput" title="Save changes of Event or Location with reload, take effect immediately" value="Apply & Reload" onclick="setSessionToLocal();">&nbsp;&nbsp;&nbsp;
					</td>
				</tr>
			</tbody>
		</table>
	<hr>
	</div>
</div>
<script type="text/javascript">
	function onIdGetPreferenceClicked(){
		var objPreference = {};
		var temp = '';
		for(var i=0;i<window.localStorage.length;i++){
			temp = window.localStorage.key(i);
			if(temp.indexOf('KR') == 0)
				continue;
			objPreference[temp] = window.localStorage.getItem(temp);
		}
		saveFile(JSON.stringify(objPreference),'preference.txt');
	}
	
	function onIdGetLogClicked(){
		var key;
		var str = "";
		for(var i=0;i<window.sessionStorage.length;i++){
			key = window.sessionStorage.key(i);
			if(key.indexOf('Log_') > -1){
				temp = parseInt(key.split('_')[1]);
				temp = (Number.isInteger(temp)) ? (new Date(temp)).toISOString() : key;
				str += temp + "|" + window.sessionStorage.getItem(key);
				str += "\r\n";
			}
		}
		saveFile(str,'log.txt');
	}
	
	function saveFile(content, filename){
		var a = document.createElement("a");
		var file = new Blob([content], {type: 'text/plain'});
		a.href = URL.createObjectURL(file);
		a.download = filename;
		a.click();
	}
	
	function setLocalToSession(){
		var key;
		for(var i=0;i<window.localStorage.length;i++){
			key = window.localStorage.key(i);
			if(key.indexOf("SCCustom_")>-1 || key.indexOf("Labyrinth_")>-1 ||
				key.indexOf("LGArea")>-1 || key.indexOf("eventLocation")>-1 ||
				key.indexOf("FW_")>-1 || key.indexOf("BRCustom")>-1 ||
				key.indexOf("SGZT")>-1){
				window.sessionStorage.setItem(key, window.localStorage.getItem(key));
			}
		}
	}
	
	function setSessionToLocal(){
		if(window.sessionStorage.length==0)
			return;
		
		window.localStorage.setItem('eventLocation', window.sessionStorage.getItem('eventLocation'));
		var key;
		for(var i=0;i<window.sessionStorage.length;i++){
			key = window.sessionStorage.key(i);
			if(key.indexOf("SCCustom_")>-1 || key.indexOf("Labyrinth_")>-1 ||
				key.indexOf("LGArea")>-1 || key.indexOf("eventLocation")>-1 ||
				key.indexOf("FW_")>-1 || key.indexOf("BRCustom")>-1 ||
				key.indexOf("SGZT")>-1 ){
				window.localStorage.setItem(key, window.sessionStorage.getItem(key));
			}
		}
	}
	
	function loadSCCustomAlgo()
	{
		var selectedZone = document.getElementById('scHuntZone').value;
		var storageValue = window.sessionStorage.getItem('SCCustom_' + selectedZone);
		var scHuntZoneEnableEle = document.getElementById('scHuntZoneEnable');
		var scHuntBaitEle = document.getElementById('scHuntBait');
		var scHuntTrinketEle = document.getElementById('scHuntTrinket');
		if (storageValue === null){
			scHuntZoneEnableEle.selectedIndex = 0;
			scHuntBait.selectedIndex = 0;
			scHuntTrinketEle.selectedIndex = 0;
			window.sessionStorage.setItem('SCCustom_' + selectedZone, [scHuntZoneEnableEle.value,scHuntBaitEle.value,scHuntTrinketEle.value]);
		}
		else{
			storageValue = storageValue.split(',');
			scHuntZoneEnableEle.value = storageValue[0];
			scHuntBaitEle.value = storageValue[1];
			scHuntTrinketEle.value = storageValue[2];
		}
	}
	
	function saveSCCustomAlgo()
	{	
		var scHuntZoneEle = document.getElementById('scHuntZone');
		var scHuntZoneEnableEle = document.getElementById('scHuntZoneEnable');
		var scHuntBaitEle = document.getElementById('scHuntBait');
		var scHuntTrinketEle = document.getElementById('scHuntTrinket');
		var key = 'SCCustom_' + scHuntZoneEle.value;
		var value = scHuntZoneEnableEle.value + ',' + scHuntBaitEle.value + ',' + scHuntTrinketEle.value;
		window.sessionStorage.setItem(key, value);
	}
	
	function saveDistrictFocus(value){
		window.sessionStorage.setItem('Labyrinth_DistrictFocus',value);
	}
	
	function onSelectLabyrinthDisarm(){
		var inputLabyrinthLastHunt = document.getElementById('inputLabyrinthLastHunt');
		var selectLabyrinthDisarm = document.getElementById('selectLabyrinthDisarm');
		inputLabyrinthLastHunt.disabled = (selectLabyrinthDisarm.value == 'true') ? '' : 'disabled';
		saveLabyrinthHallway();
	}
	
	function onInputLabyrinthLastHuntChanged(){
		saveLabyrinthHallway();
	}
	
	function saveLabyrinthHallway(){
		var selectHallway15Plain = document.getElementById('selectHallway15Plain');
		var selectHallway1560Plain = document.getElementById('selectHallway1560Plain');
		var selectHallway1560Superior = document.getElementById('selectHallway1560Superior');
		var selectHallway60Plain = document.getElementById('selectHallway60Plain');
		var selectHallway60Superior = document.getElementById('selectHallway60Superior');
		var selectHallway60Epic = document.getElementById('selectHallway60Epic');
		var objDefaultHallwayPriorities = {
			between0and14 : ['LP'],
			between15and59  : ['SP','LS'],
			between60and100  : ['SP','SS','LE'],
			chooseOtherDoors : false,
			typeOtherDoors : "SHORTEST_ONLY",
			securityDisarm : false,
			lastHunt : 0
		};
		var storageValue = JSON.parse(window.sessionStorage.getItem('Labyrinth_HallwayPriorities'));
		if(storageValue === null)
			storageValue = objDefaultHallwayPriorities;
		
		storageValue.between0and14 = [selectHallway15Plain.value];
		storageValue.between15and59 = [selectHallway1560Plain.value, selectHallway1560Superior.value];
		storageValue.between60and100 = [selectHallway60Plain.value, selectHallway60Superior.value, selectHallway60Epic.value];
		storageValue.chooseOtherDoors = (document.getElementById('chooseOtherDoors').value == 'true');
		storageValue.typeOtherDoors = document.getElementById('typeOtherDoors').value;
		storageValue.securityDisarm = (document.getElementById('selectLabyrinthDisarm').value == 'true');
		storageValue.lastHunt = parseInt(document.getElementById('inputLabyrinthLastHunt').value);
		window.sessionStorage.setItem('Labyrinth_HallwayPriorities', JSON.stringify(storageValue));
	}
	
	function loadDistricFocus(){
		var storageValue = window.sessionStorage.getItem('Labyrinth_DistrictFocus');
		if(storageValue === null)
			storageValue = 'None';
		
		document.getElementById('labyrinthDistrict').value = storageValue;
	}
	
	function loadLabyrinthHallway(){
		var selectedDistrict = document.getElementById('labyrinthDistrict').value;
		var inputLabyrinthLastHunt = document.getElementById('inputLabyrinthLastHunt');
		var selectLabyrinthDisarm = document.getElementById('selectLabyrinthDisarm');
		document.getElementById('trPriorities15').style.display = (selectedDistrict == 'None') ? 'none' : 'table-row';
		document.getElementById('trPriorities1560').style.display = (selectedDistrict == 'None') ? 'none' : 'table-row';
		document.getElementById('trPriorities60').style.display = (selectedDistrict == 'None') ? 'none' : 'table-row';
		document.getElementById('labyrinthOtherHallway').style.display = (selectedDistrict == 'None') ? 'none' : 'table-row';
		var selectHallway15Plain = document.getElementById('selectHallway15Plain');
		var selectHallway1560Plain = document.getElementById('selectHallway1560Plain');
		var selectHallway1560Superior = document.getElementById('selectHallway1560Superior');
		var selectHallway60Plain = document.getElementById('selectHallway60Plain');
		var selectHallway60Superior = document.getElementById('selectHallway60Superior');
		var selectHallway60Epic = document.getElementById('selectHallway60Epic');
		var selectChooseOtherDoors = document.getElementById('chooseOtherDoors');
		var typeOtherDoors = document.getElementById('typeOtherDoors');
		var storageValue = JSON.parse(window.sessionStorage.getItem('Labyrinth_HallwayPriorities'));
		var objDefaultHallwayPriorities = {
			between0and14 : ['LP'],
			between15and59  : ['SP','LS'],
			between60and100  : ['SP','SS','LE'],
			chooseOtherDoors : false,
			typeOtherDoors : "SHORTEST_ONLY",
			securityDisarm : false,
			lastHunt : 0
		};
		if(storageValue === null){
			storageValue = JSON.stringify(objDefaultHallwayPriorities);
			storageValue = JSON.parse(storageValue);
		}
		
		inputLabyrinthLastHunt.value = storageValue.lastHunt;
		inputLabyrinthLastHunt.disabled = (storageValue.securityDisarm) ? '' : 'disabled';
		selectLabyrinthDisarm.value = storageValue.securityDisarm.toString();
		if(selectedDistrict == 'None')
			return;
		
		selectHallway15Plain.value = storageValue.between0and14[0];
		selectHallway1560Plain.value = storageValue.between15and59[0];
		selectHallway1560Superior.value = storageValue.between15and59[1];
		selectHallway60Plain.value = storageValue.between60and100[0];
		selectHallway60Superior.value = storageValue.between60and100[1];
		selectHallway60Epic.value = storageValue.between60and100[2];

		selectHallway60Epic.style = (selectedDistrict == 'TREASURY' || selectedDistrict == 'FARMING') ? 'display:none' : 'display:inline';
		selectChooseOtherDoors.value = storageValue.chooseOtherDoors.toString();
		typeOtherDoors.value = storageValue.typeOtherDoors;
		document.getElementById('typeOtherDoors').disabled = (storageValue.chooseOtherDoors)? '' : 'disabled';
	}
	
	function saveLG(){
		var isPour = (document.getElementById('lgAutoPour').value == 'true');
		var maxSalt = document.getElementById('lgSalt').value;
		window.sessionStorage.setItem('LGArea', isPour + ',' + maxSalt);
	}
	
	function loadLG(){
		var storageValue = window.sessionStorage.getItem('LGArea');
		if(storageValue === null){
			storageValue = 'true,25';
			window.sessionStorage.setItem('LGArea', storageValue);
		}

		storageValue = storageValue.split(',');
		document.getElementById('lgAutoPour').value = storageValue[0];
		document.getElementById('lgSalt').value = parseInt(storageValue[1]);
	}
	
	function onSelectFWWaveChanged(){
		// show wave X settings
		var nWave = parseInt(document.getElementById('selectFWWave').value);
		var option = document.getElementById('selectFWFocusType').children;
		for(var i=0;i<option.length;i++){
			if(option[i].innerText.indexOf('Special') > -1)
				option[i].style = (nWave==1) ? 'display:none' : '';
		}
		initControlsFW();
	}
	
	function onSelectFWStreakChanged(){
		initControlsFW();
	}
	
	function onSelectFWCheeseChanged(){
		saveFW();
	}
	
	function onSelectFWFocusTypeChanged(){
		saveFW();
	}
	
	function onSelectFWCharmTypeChanged(){
		saveFW();
	}
	
	function onSelectFWSpecialChanged(){
		saveFW();
	}
	
	function onSelectFWPrioritiesChanged(){
		saveFW();
	}
	
	function onSelectFWLastTypeConfigChanged(){
		saveFW();
	}
	
	function initControlsFW(){
		var selectFWStreak = document.getElementById('selectFWStreak');
		var selectFWFocusType = document.getElementById('selectFWFocusType');
		var selectFWPriorities = document.getElementById('selectFWPriorities');
		var selectFWCheese = document.getElementById('selectFWCheese');
		var selectFWCharmType = document.getElementById('selectFWCharmType');
		var selectFWSpecial = document.getElementById('selectFWSpecial');
		var selectFWLastTypeConfig = document.getElementById('selectFWLastTypeConfig');
		var storageValue = window.sessionStorage.getItem('FW_Wave' + document.getElementById('selectFWWave').value);
		if(storageValue === null){
			selectFWFocusType.selectedIndex = -1;
			selectFWPriorities.selectedIndex = -1;
			selectFWCheese.selectedIndex = -1;
			selectFWCharmType.selectedIndex = -1;
			selectFWSpecial.selectedIndex = -1;
			selectFWLastTypeConfig.selectedIndex = -1;
		}
		else{
			storageValue = JSON.parse(storageValue);
			selectFWFocusType.value = storageValue.focusType;
			selectFWPriorities.value = storageValue.priorities;
			selectFWCheese.value = storageValue.cheese[selectFWStreak.selectedIndex];
			selectFWCharmType.value = storageValue.charmType[selectFWStreak.selectedIndex];
			selectFWSpecial.value = storageValue.special[selectFWStreak.selectedIndex];
			selectFWLastTypeConfig.value = storageValue.lastSoldierConfig;
		}
	}
	
	function saveFW(){
		var nWave = document.getElementById('selectFWWave').value;
		var selectFWStreak = document.getElementById('selectFWStreak');
		var nStreak = parseInt(selectFWStreak.value);
		var nStreakLength = selectFWStreak.children.length;
		var selectFWFocusType = document.getElementById('selectFWFocusType');
		var selectFWPriorities = document.getElementById('selectFWPriorities');
		var selectFWCheese = document.getElementById('selectFWCheese');
		var selectFWCharmType = document.getElementById('selectFWCharmType');
		var selectFWSpecial = document.getElementById('selectFWSpecial');
		var selectFWLastTypeConfig = document.getElementById('selectFWLastTypeConfig');
		var storageValue = window.sessionStorage.getItem('FW_Wave' + nWave);
		if(storageValue === null){
			var obj = {
				focusType : 'NORMAL',
				priorities : 'HIGHEST',
				cheese : new Array(nStreakLength),
				charmType : new Array(nStreakLength),
				special : new Array(nStreakLength),
				lastSoldierConfig : 'CONFIG_GOUDA'
			};
			storageValue = JSON.stringify(obj);
		}
		storageValue = JSON.parse(storageValue);
		storageValue.focusType = selectFWFocusType.value;
		storageValue.priorities = selectFWPriorities.value;
		storageValue.cheese[nStreak] = selectFWCheese.value;
		storageValue.charmType[nStreak] = selectFWCharmType.value;
		storageValue.special[nStreak] = selectFWSpecial.value;
		storageValue.lastSoldierConfig = selectFWLastTypeConfig.value;
		window.sessionStorage.setItem('FW_Wave' + nWave, JSON.stringify(storageValue));
	}
	
	function onInputToggleCanisterChanged(){
		saveBR();
	}
	
	function onSelectBRHuntMistTierChanged(){
		var hunt = document.getElementById('selectBRHuntMistTier').value;
		var storageValue = window.sessionStorage.getItem('BRCustom');
		if(storageValue === null){
			var objBR = {
				hunt : '',
				toggle : 1,
				name : ['Red', 'Green', 'Yellow', 'None'],
				weapon : new Array(4),
				base : new Array(4),
				trinket : new Array(4),
				bait : new Array(4)
			};
			storageValue = JSON.stringify(objBR);
		}
		storageValue = JSON.parse(storageValue);
		storageValue.hunt = hunt;
		window.sessionStorage.setItem('BRCustom', JSON.stringify(storageValue));
		initControlsBR();
	}
	
	function onSelectBRTrapWeaponChanged(){
		saveBR();
	}
	
	function onSelectBRTrapBaseChanged(){
		saveBR();
	}
	
	function onSelectBRTrapTrinketChanged(){
		saveBR();
	}
	
	function onSelectBRTrapBaitChanged(){
		saveBR();
	}
	
	function initControlsBR(){
		var hunt = document.getElementById('selectBRHuntMistTier');
		var toggle = document.getElementById('ToggleCanisterInput');
		var weapon = document.getElementById('selectBRTrapWeapon');
		var base = document.getElementById('selectBRTrapBase');
		var trinket = document.getElementById('selectBRTrapTrinket');
		var bait = document.getElementById('selectBRTrapBait');
		var storageValue = window.sessionStorage.getItem('BRCustom');
		if(storageValue === null){
			toggle.value = 1;
			hunt.selectedIndex = 0;
			weapon.selectedIndex = -1;
			base.selectedIndex = -1;
			trinket.selectedIndex = -1;
			bait.selectedIndex = -1;
		}
		else{
			storageValue = JSON.parse(storageValue);
			hunt.value = storageValue.hunt;
			toggle.value = storageValue.toggle;
			var nIndex = storageValue.name.indexOf(hunt.value);
			weapon.value = storageValue.weapon[nIndex];
			base.value = storageValue.base[nIndex];
			trinket.value = storageValue.trinket[nIndex];
			bait.value = storageValue.bait[nIndex];
		}
		document.getElementById('trBRToggle').style.display = (hunt.value == 'Red')? 'table-row' : 'none';
	}
	
	function saveBR(){
		var hunt = document.getElementById('selectBRHuntMistTier').value;
		var nToggle = parseInt(document.getElementById('ToggleCanisterInput').value);
		var weapon = document.getElementById('selectBRTrapWeapon').value;
		var base = document.getElementById('selectBRTrapBase').value;
		var trinket = document.getElementById('selectBRTrapTrinket').value;
		var bait = document.getElementById('selectBRTrapBait').value;
		var storageValue = window.sessionStorage.getItem('BRCustom');
		if(storageValue === null){
			var objBR = {
				hunt : '',
				toggle : 1,
				name : ['Red', 'Green', 'Yellow', 'None'],
				weapon : new Array(4),
				base : new Array(4),
				trinket : new Array(4),
				bait : new Array(4)
			};
			storageValue = JSON.stringify(objBR);
		}
		storageValue = JSON.parse(storageValue);
		var nIndex = storageValue.name.indexOf(hunt);
		if(nIndex < 0)
			nIndex = 0;
		storageValue.hunt = hunt;
		storageValue.toggle = nToggle;
		storageValue.weapon[nIndex] = weapon;
		storageValue.base[nIndex] = base;
		storageValue.trinket[nIndex] = trinket;
		storageValue.bait[nIndex] = bait;
		window.sessionStorage.setItem('BRCustom', JSON.stringify(storageValue));
	}
	
	function onSelectUseZUMChanged(){
		saveSGZT();
	}
	
	function saveSGZT(){
		var selectUseZUM = document.getElementById('selectUseZUM');
		var storageValue = window.sessionStorage.getItem('SGZT');
		if(storageValue === null){
			var objSGZT = {
				useZUMIn : 'None'
			};
			storageValue = JSON.stringify(objSGZT);
		}
		storageValue = JSON.parse(storageValue);
		storageValue.useZUMIn = selectUseZUM.value;
		window.sessionStorage.setItem('SGZT', JSON.stringify(storageValue));
	}
	
	function initControlsSGZT(){
		var selectUseZUM = document.getElementById('selectUseZUM');
		var storageValue = window.sessionStorage.getItem('SGZT');
		if(storageValue === null){
			selectUseZUM.selectedIndex = -1;
		}
		else{
			storageValue = JSON.parse(storageValue);
			selectUseZUM.value = storageValue.useZUMIn;
		}
	}
	
	function showOrHideTr(algo){
		document.getElementById('lgArea').style.display = 'none';
		document.getElementById('scCustom').style.display = 'none';
		document.getElementById('labyrinth').style.display = 'none';
		document.getElementById('trPriorities15').style.display = 'none';
		document.getElementById('trPriorities1560').style.display = 'none';
		document.getElementById('trPriorities60').style.display = 'none';
		document.getElementById('labyrinthOtherHallway').style.display = 'none';
		document.getElementById('trLabyrinthDisarm').style.display = 'none';
		document.getElementById('trFWWave').style.display = 'none';
		document.getElementById('trFWStreak').style.display = 'none';
		document.getElementById('trFWFocusType').style.display = 'none';
		document.getElementById('trFWLastType').style.display = 'none';
		document.getElementById('trBRConfig').style.display = 'none';
		document.getElementById('trBRToggle').style.display = 'none';
		document.getElementById('trBRTrapSetup').style.display = 'none';
		document.getElementById('trUseZum').style.display = 'none';
		if(algo == 'All LG Area'){
			document.getElementById('lgArea').style.display = 'table-row';
			loadLG();
		}
		else if(algo == 'Sunken City Custom'){
			document.getElementById('scCustom').style.display = 'table-row';
			loadSCCustomAlgo();
		}
		else if(algo == 'Labyrinth'){
			document.getElementById('labyrinth').style.display = 'table-row';
			document.getElementById('trPriorities15').style.display = 'table-row';
			document.getElementById('trPriorities1560').style.display = 'table-row';
			document.getElementById('trPriorities60').style.display = 'table-row';
			document.getElementById('labyrinthOtherHallway').style.display = 'table-row';
			document.getElementById('trLabyrinthDisarm').style.display = 'table-row';
			loadDistricFocus();
			loadLabyrinthHallway();
		}
		else if(algo == 'Fiery Warpath'){
			document.getElementById('trFWWave').style.display = 'table-row';
			document.getElementById('trFWStreak').style.display = 'table-row';
			document.getElementById('trFWFocusType').style.display = 'table-row';
			document.getElementById('trFWLastType').style.display = 'table-row';
			document.getElementById('selectFWWave').selectedIndex = 0;
			onSelectFWWaveChanged();
		}
		else if(algo == 'Burroughs Rift Custom'){
			document.getElementById('trBRConfig').style.display = 'table-row';
			document.getElementById('trBRToggle').style.display = 'table-row';
			document.getElementById('trBRTrapSetup').style.display = 'table-row';
			initControlsBR();
		}
		else if(algo == 'SG/ZT'){
			document.getElementById('trUseZum').style.display = 'table-row';
			initControlsSGZT();
		}
	}
</script>